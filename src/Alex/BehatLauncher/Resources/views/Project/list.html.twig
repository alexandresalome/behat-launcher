{% extends "layout.html.twig" %}

{% block title 'title.project_list'|trans %}

{% set menu_active = "project_list" %}
{% set refresh = true %}

{% block content %}
    {% for project in project_list %}
        <div data-project="{{ project.name }}">
            {% if not loop.first %}
                <hr />
            {% endif %}
            <h2>
                {{ project.name }}
                <a class="btn" href="{{ path('run_create', {project: project.name}) }}">{{ 'button.create_run'|trans }}</a>
            </h2>
            <div class="actions">
            </div>
            {{ include('Run/_list.html.twig', {runs: run_storage.runs(project, 0, 5)}) }}
        </div>
    {% endfor %}
{% endblock %}

{% block angular %}
{% verbatim %}
    <div ng-repeat="project in projects" data-project="{{ project.name }}">
        <hr ng-show="!$first" />
        <h2>
            {{ project.name }}
        </h2>
        <div class="actions">
            <a class="btn" ng-href="/project/{{ project.name }}/create-run">Create a run</a>
        </div>
        <br />
        <div ng-repeat="runs in [project.runs]" ng-include="'templates/_run_list.html'" />
    </div>
{% endverbatim %}
{% endblock %}
